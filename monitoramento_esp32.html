<!DOCTYPE html>
<html lang="pt-br" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monitoramento Aut√¥nomo (DHT22 + I¬≤C)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- 
    Chosen Palette: Warm Neutral Sky
    Application Structure Plan: A single-page application with a sticky top navigation (Vis√£o Geral, Arquitetura, L√≥gica, Pr√≥ximos Passos). This thematic structure is more user-friendly for web exploration than the original linear slide deck. The "Vis√£o Geral" section will feature an interactive JavaScript-based simulation of the final device (OLED display, live chart, and functional reset button) to create an engaging "wow" factor. "Arquitetura" will use HTML/Tailwind to create a diagram of the pin mappings (as SVG is disallowed) and an interactive tab for protocol comparison. "L√≥gica" will explain the software concepts (state logging, button interaction, and the challenge of expanding to new sensors/actuators). This design prioritiza interactive engagement and comprehension over mirroring the report's structure.
    Visualization & Content Choices:
    - [Project Simulation -> Goal: Inform/Engage -> Method: JS + HTML/CSS Simulation + Chart.js Line Chart -> Interaction: Live data updates via setInterval(), button click -> Justification: Translates the hardware project into a tangible web experience.]
    - [Pin Mapping -> Goal: Organize -> Method: HTML/Tailwind Diagram -> Interaction: Static visual -> Justification: Replaces a static image/SVG with structured HTML as per constraints.]
    - [I¬≤C vs SPI -> Goal: Compare -> Method: JS-powered Tabs -> Interaction: Click to toggle content -> Justification: Interactive comparison of technical concepts.]
    - [Automation/Actuators -> Goal: Discuss Expansion -> Method: Side-by-side comparison of passive vs active monitoring -> Justification: Focuses on the new user request.]
    CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.
    -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* bg-slate-50 */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 250px;
            max-height: 300px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 300px;
                max-height: 350px;
            }
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- Header & Navigation -->
    <header class="bg-white/90 backdrop-blur-md shadow-sm sticky top-0 z-50">
        <nav class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex-shrink-0">
                    <span class="text-xl font-bold text-sky-700">Monitoramento Aut√¥nomo</span>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#overview" class="nav-link text-gray-600 hover:text-sky-700 px-3 py-2 rounded-md text-sm font-medium">Vis√£o Geral</a>
                        <a href="#architecture" class="nav-link text-gray-600 hover:text-sky-700 px-3 py-2 rounded-md text-sm font-medium">Arquitetura</a>
                        <a href="#logic" class="nav-link text-gray-600 hover:text-sky-700 px-3 py-2 rounded-md text-sm font-medium">L√≥gica do Software</a>
                        <a href="#next-steps" class="nav-link text-gray-600 hover:text-sky-700 px-3 py-2 rounded-md text-sm font-medium">Pr√≥ximos Passos</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="max-w-6xl mx-auto p-4 sm:p-6 lg:p-8">

        <!-- Section 1: Overview & Simulator -->
        <section id="overview" class="pt-16 -mt-16">
            <h1 class="text-4xl font-bold text-gray-900 mb-4">Monitoramento Ambiental Avan√ßado com ESP32</h1>
            <p class="text-lg text-gray-600 mb-8">
                Esta aplica√ß√£o explora um projeto de sistema de medi√ß√£o de Temperatura e Umidade. O dispositivo f√≠sico usa um sensor DHT22, um display OLED (via **I¬≤C**) e um bot√£o de reset para registrar os valores m√°ximos e m√≠nimos. Abaixo, voc√™ pode interagir com um simulador de software que replica o comportamento e a l√≥gica do dispositivo final.
            </p>

            <!-- Simulator -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-start">
                
                <!-- Left Column: Simulated Display & Controls -->
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h2 class="text-2xl font-semibold mb-4 text-gray-900">Simulador do Dispositivo</h2>
                    
                    <!-- Simulated OLED Display -->
                    <div class="bg-gray-900 text-white p-4 rounded-md border-4 border-gray-700" style="font-family: 'Courier New', monospace;">
                        <div id="oled-line-1" class="text-xs text-yellow-300">TEMP. e UMIDADE DHT22</div>
                        <div class="w-full h-px bg-gray-600 my-1"></div>
                        <div id="oled-line-2" class="text-2xl">...</div>
                        <div id="oled-line-3" class="text-2xl">...</div>
                        <div id="oled-line-4" class="text-xs mt-2">MAX: ...</div>
                        <div id="oled-line-5" class="text-xs">MIN: ...</div>
                    </div>

                    <!-- Controls -->
                    <div class="flex items-center space-x-4 mt-6">
                        <button id="resetButton" class="w-full bg-sky-600 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200">
                            Resetar Max/Min
                        </button>
                        <div class="flex items-center space-x-2">
                            <div id="ledIndicator" class="w-4 h-4 bg-gray-300 rounded-full transition-colors duration-100"></div>
                            <span class="text-sm text-gray-500">Leitura</span>
                        </div>
                    </div>
                </div>

                <!-- Right Column: Live Chart -->
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h2 class="text-2xl font-semibold mb-4 text-gray-900">Log de Dados em Tempo Real</h2>
                    <p class="text-sm text-gray-600 mb-4">O gr√°fico abaixo atualiza a cada 2 segundos, simulando a leitura do sensor DHT22.</p>
                    <div class="chart-container">
                        <canvas id="realTimeChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 2: Architecture -->
        <section id="architecture" class="pt-24 -mt-16">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">Arquitetura de Hardware</h2>
            <p class="text-lg text-gray-600 mb-8">
                A escolha dos componentes e sua conex√£o definem a performance do sistema. O projeto utiliza o ESP32 por sua alta capacidade de processamento. Esta se√ß√£o detalha o mapeamento de pinos e o protocolo de comunica√ß√£o **I¬≤C** utilizado.
            </p>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Pin Mapping Diagram (HTML/Tailwind) -->
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-semibold mb-4 text-gray-900">üìå Mapeamento de Pinos (ESP32)</h3>
                    <div class="space-y-3">
                        <div class="font-mono p-3 bg-slate-100 rounded-md flex justify-between items-center">
                            <span><span class="font-bold text-red-600">DHT22</span> (Data)</span>
                            <span class="text-sky-700 font-bold">GPIO 4</span>
                        </div>
                        <div class="font-mono p-3 bg-slate-100 rounded-md flex justify-between items-center">
                            <span><span class="font-bold text-red-600">LED</span> (Anodo)</span>
                            <span class="text-sky-700 font-bold">GPIO 15</span>
                        </div>
                        <div class="font-mono p-3 bg-slate-100 rounded-md flex justify-between items-center">
                            <span><span class="font-bold text-red-600">Bot√£o</span> (Sa√≠da)</span>
                            <span class="text-sky-700 font-bold">GPIO 23</span>
                        </div>
                        <div class="w-full h-px bg-gray-300 my-3"></div>
                        <!-- I2C PINS -->
                        <div class="font-mono p-3 bg-slate-100 rounded-md flex justify-between items-center">
                            <span><span class="font-bold text-blue-600">OLED / I¬≤C</span> (SDA - Data)</span>
                            <span class="text-sky-700 font-bold">GPIO 21</span>
                        </div>
                        <div class="font-mono p-3 bg-slate-100 rounded-md flex justify-between items-center">
                            <span><span class="font-bold text-blue-600">OLED / I¬≤C</span> (SCL - Clock)</span>
                            <span class="text-sky-700 font-bold">GPIO 22</span>
                        </div>
                        <!-- Actuator Pin -->
                         <div class="font-mono p-3 bg-green-100 rounded-md flex justify-between items-center">
                            <span><span class="font-bold text-green-700">Rel√© / Carga</span> (Acionamento)</span>
                            <span class="text-sky-700 font-bold">GPIO 19</span>
                        </div>
                        <!-- Analog Input Pin -->
                        <div class="font-mono p-3 bg-yellow-100 rounded-md flex justify-between items-center">
                            <span><span class="font-bold text-yellow-700">Vibra√ß√£o</span> (Entrada Anal√≥gica)</span>
                            <span class="text-sky-700 font-bold">GPIO 36 (ADC1_CH0)</span>
                        </div>
                    </div>
                    <div class="mt-4 p-3 bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 rounded-r-md">
                        <span class="font-bold">Aten√ß√£o:</span> O pino de DATA do DHT22 requer um resistor <span class="font-mono">Pull-up de 10k $\Omega$</span> conectado ao VCC (3.3V).
                    </div>
                </div>

                <!-- I2C Protocol Focus -->
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-semibold mb-4 text-gray-900">üîó Protocolo de Barramento: I¬≤C</h3>
                    <p class="text-gray-600 mb-4">
                        O barramento I¬≤C (Inter-Integrated Circuit) √© crucial para a escalabilidade, permitindo que o ESP32 se comunique com o display OLED e novos sensores (como o sensor de press√£o) usando apenas dois pinos.
                    </p>
                    <div class="space-y-2">
                        <h4 class="font-medium">Benef√≠cios do I¬≤C para Expans√£o</h4>
                        <ul class="list-disc list-inside text-gray-600">
                            <li>**Fia√ß√£o M√≠nima:** Utiliza apenas 2 pinos (SDA - Data e SCL - Clock).</li>
                            <li>**Escalabilidade:** Permite conectar m√∫ltiplos dispositivos (cada um com um endere√ßo √∫nico) ao mesmo par de pinos.</li>
                            <li>**Aplica√ß√µes:** Ideal para dispositivos de baixa e m√©dia velocidade, como displays e a maioria dos sensores ambientais.</li>
                        </ul>
                        <div class="mt-4 p-3 bg-blue-100 border-l-4 border-blue-500 text-blue-800 rounded-r-md">
                            <span class="font-bold">Nota:</span> Um sensor de press√£o como o BMP280, que usa I¬≤C, pode ser adicionado diretamente aos pinos **GPIO 21** e **GPIO 22**.
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 3: Logic -->
        <section id="logic" class="pt-24 -mt-16">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">L√≥gica do Software</h2>
            <p class="text-lg text-gray-600 mb-8">
                O *firmware* do ESP32 √© respons√°vel por tr√™s tarefas principais: rastrear o estado (M√°x/M√≠n), interagir com o usu√°rio (bot√£o) e, agora, expandir para um controle de processo mais complexo.
            </p>

            <div class="space-y-8">
                <!-- Max/Min Logic -->
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-semibold mb-4 text-gray-900">üìà Rastreamento de Estado (M√°x/M√≠n)</h3>
                    <p class="text-gray-600 mb-4">O sistema armazena as varia√ß√µes mais extremas desde o √∫ltimo reset. Um flag `isFirstReading` √© usado para inicializar o log com a primeira leitura v√°lida. A cada ciclo, o c√≥digo compara:</p>
                    <pre class="bg-gray-100 text-gray-800 p-4 rounded-md overflow-x-auto"><code>// L√≥gica de atualiza√ß√£o a cada leitura
if (currentTemp_C > maxTemp_C) { maxTemp_C = currentTemp_C; }
if (currentTemp_C < minTemp_C) { minTemp_C = currentTemp_C; }
// ... (l√≥gica similar para umidade)</code></pre>
                </div>

                <!-- Button Logic -->
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-semibold mb-4 text-gray-900">‚èØÔ∏è Intera√ß√£o: Bot√£o de Reset (Pull-up)</h3>
                    <p class="text-gray-600 mb-4">O bot√£o (GPIO 23) permite ao usu√°rio resetar o log de M√°x/M√≠n. Ele usa o resistor `pull-up` interno do ESP32, o que simplifica o hardware.</p>
                    <ul class="list-disc list-inside text-gray-600 space-y-2">
                        <li>**Configura√ß√£o:** `pinMode(BUTTONPIN, INPUT_PULLUP);`</li>
                        <li>**Estado Ocioso:** O pino √© mantido em n√≠vel L√ìGICO ALTO (HIGH).</li>
                        <li>**Acionamento:** Ao pressionar, o bot√£o conecta o pino ao GND, resultando em n√≠vel L√ìGICO BAIXO (LOW).</li>
                        <li>**L√≥gica:** `if (digitalRead(BUTTONPIN) == LOW) { resetMaxMin(); }`</li>
                    </ul>
                </div>

                <!-- NEW: Automation & Actuation -->
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-semibold mb-4 text-gray-900">üöÄ Expans√£o: Adi√ß√£o de Sensores e Acionamento de Cargas</h3>
                    <p class="text-gray-600 mb-4">O sistema de monitoramento pode evoluir para um sistema de controle de processo, adicionando novos sensores para uma vis√£o hol√≠stica e atuadores para interven√ß√£o autom√°tica.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="p-4 bg-blue-50 border border-blue-200 rounded-lg">
                            <h4 class="font-bold text-blue-700">Sensores Complementares (Entrada)</h4>
                            <p class="text-blue-600">A inclus√£o de medi√ß√µes como **Press√£o** (via I¬≤C, ex: BMP280) e **Vibra√ß√£o** (via entrada anal√≥gica) transforma a aplica√ß√£o, permitindo a detec√ß√£o de anomalias em tempo real.</p>
                        </div>
                        <div class="p-4 bg-purple-50 border border-purple-200 rounded-lg">
                            <h4 class="font-bold text-purple-700">Acionamento de Cargas (Sa√≠da)</h4>
                            <p class="text-purple-600">Com rel√©s, o ESP32 pode controlar dispositivos externos de alta pot√™ncia, como **V√°lvulas Solenoides** ou **Ventiladores**, para automatizar a corre√ß√£o de condi√ß√µes cr√≠ticas (ex: ligar ventilador se Temp > $30^{\circ} \text{C}$).</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 4: Next Steps -->
        <section id="next-steps" class="pt-24 -mt-16">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">Pr√≥ximos Passos e Escalabilidade</h2>
            <p class="text-lg text-gray-600 mb-8">
                Este projeto √© uma base s√≥lida. As melhorias √≥bvias focam em conectividade, persist√™ncia de dados e otimiza√ß√£o do *firmware*.
            </p>
            <div class="space-y-4">
                <div class="bg-white p-5 rounded-lg shadow-md">
                    <h3 class="text-lg font-semibold text-sky-700">1. Conectividade Wi-Fi</h3>
                    <p class="text-gray-600">Utilizar o m√≥dulo Wi-Fi do ESP32 para enviar os dados (atuais, m√°x, m√≠n) para um servidor web local ou uma plataforma de IoT como o Thingspeak.</p>
                </div>
                <div class="bg-white p-5 rounded-lg shadow-md">
                    <h3 class="text-lg font-semibold text-sky-700">2. Persist√™ncia de Dados</h3>
                    <p class="text-gray-600">Salvar os valores M√°x/M√≠n na mem√≥ria Flash do ESP32 (usando SPIFFS ou a EEPROM virtual) para que o log n√£o seja perdido se o dispositivo for desligado.</p>
                </div>
                <div class="bg-white p-5 rounded-lg shadow-md">
                    <h3 class="text-lg font-semibold text-sky-700">3. Implementa√ß√£o de Automa√ß√£o</h3>
                    <p class="text-gray-600">Integrar rel√©s e solenoides para controlar cargas (como v√°lvulas ou ventiladores) com base nos dados dos sensores (T/H, Press√£o, Vibra√ß√£o), estabelecendo um sistema de controle de processo completo.</p>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="max-w-6xl mx-auto mt-16 mb-8 text-center text-gray-500 text-sm">
        IFCE Maracana√∫<br>
        Bacharelado em Engenharia de Controle e Automa√ß√£o<br>
        William Belchior
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- State Variables ---
            let currentTemp_C = 23.5;
            let currentHumidity = 45.0;
            let maxTemp_C = -999.0;
            let minTemp_C = 999.0;
            let maxHumidity = -999.0;
            let minHumidity = 999.0;
            let isFirstReading = true;
            
            // --- Chart.js Setup ---
            const ctx = document.getElementById('realTimeChart').getContext('2d');
            const chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: Array(15).fill(''),
                    datasets: [
                        {
                            label: 'Temperatura (¬∞C)',
                            data: Array(15).fill(null),
                            borderColor: 'rgb(2, 132, 199)', // text-sky-600
                            backgroundColor: 'rgba(2, 132, 199, 0.1)',
                            borderWidth: 2,
                            tension: 0.3,
                            fill: true,
                            yAxisID: 'yTemp'
                        },
                        {
                            label: 'Umidade (%)',
                            data: Array(15).fill(null),
                            borderColor: 'rgb(234, 179, 8)', // text-yellow-500
                            backgroundColor: 'rgba(234, 179, 8, 0.1)',
                            borderWidth: 2,
                            tension: 0.3,
                            fill: true,
                            yAxisID: 'yHumid'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        yTemp: {
                            type: 'linear',
                            position: 'left',
                            beginAtZero: false,
                            suggestedMin: 15,
                            suggestedMax: 35,
                            ticks: {
                                callback: value => value + '¬∞C'
                            }
                        },
                        yHumid: {
                            type: 'linear',
                            position: 'right',
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                callback: value => value + '%'
                            },
                            grid: {
                                drawOnChartArea: false, 
                            },
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });

            // --- DOM Elements ---
            const led = document.getElementById('ledIndicator');
            const resetButton = document.getElementById('resetButton');
            const oledLines = {
                l1: document.getElementById('oled-line-1'),
                l2: document.getElementById('oled-line-2'),
                l3: document.getElementById('oled-line-3'),
                l4: document.getElementById('oled-line-4'),
                l5: document.getElementById('oled-line-5'),
            };

            // --- Core Logic Functions ---
            function flashLED() {
                led.classList.remove('bg-gray-300');
                led.classList.add('bg-red-500');
                setTimeout(() => {
                    led.classList.remove('bg-red-500');
                    led.classList.add('bg-gray-300');
                }, 200); 
            }

            function simulateReading() {
                // Simula uma pequena varia√ß√£o nos dados
                currentTemp_C += (Math.random() - 0.45) * 0.5;
                currentHumidity += (Math.random() - 0.5) * 2.0;

                // Limita os valores
                if (currentTemp_C < 10) currentTemp_C = 10;
                if (currentTemp_C > 40) currentTemp_C = 40;
                if (currentHumidity < 20) currentHumidity = 20;
                if (currentHumidity > 80) currentHumidity = 80;
            }

            function updateMaxMin() {
                if (isFirstReading) {
                    maxTemp_C = currentTemp_C;
                    minTemp_C = currentTemp_C;
                    maxHumidity = currentHumidity;
                    minHumidity = currentHumidity;
                    isFirstReading = false;
                }

                if (currentTemp_C > maxTemp_C) maxTemp_C = currentTemp_C;
                if (currentTemp_C < minTemp_C) minTemp_C = currentTemp_C;
                if (currentHumidity > maxHumidity) maxHumidity = currentHumidity;
                if (currentHumidity < minHumidity) minHumidity = currentHumidity;
            }

            function updateDisplay() {
                oledLines.l2.textContent = `${currentTemp_C.toFixed(1)} C`;
                oledLines.l3.textContent = `${currentHumidity.toFixed(0)} %`;
                oledLines.l4.textContent = `MAX: ${maxTemp_C.toFixed(1)}C / ${maxHumidity.toFixed(0)}%`;
                oledLines.l5.textContent = `MIN: ${minTemp_C.toFixed(1)}C / ${minHumidity.toFixed(0)}%`;
            }

            function updateChart() {
                chart.data.labels.push('');
                chart.data.labels.shift();
                
                chart.data.datasets[0].data.push(currentTemp_C.toFixed(1));
                chart.data.datasets[0].data.shift();

                chart.data.datasets[1].data.push(currentHumidity.toFixed(0));
                chart.data.datasets[1].data.shift();
                
                chart.update('none'); 
            }

            function resetMaxMin() {
                isFirstReading = true;
                updateMaxMin(); 
                updateDisplay();
                
                // Feedback visual do reset
                oledLines.l1.textContent = "LOG RESETADO!";
                oledLines.l2.textContent = "";
                oledLines.l3.textContent = "";
                setTimeout(() => {
                    oledLines.l1.textContent = "TEMP. e UMIDADE DHT22";
                }, 1000);
            }

            // --- Main Loop (Simulates device loop) ---
            function mainLoop() {
                flashLED();
                simulateReading();
                updateMaxMin();
                updateDisplay();
                updateChart();
            }

            // --- Event Listeners ---
            resetButton.addEventListener('click', resetMaxMin);

            // Smooth scrolling for nav links
            document.querySelectorAll('a.nav-link').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({
                        behavior: 'smooth'
                    });
                });
            });

            // Start the simulation
            mainLoop(); // Run once immediately
            setInterval(mainLoop, 2000); // Run every 2 seconds
        });
    </script>
</body>
</html>
